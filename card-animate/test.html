<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>demo</title>
    <link rel="stylesheet" href="./test.css">
</head>

<body>
    <div id="projects">
        <div class="grid">
            <div class="projects">
                <div class="project ani0">
                    <div class="mask">
                        <div class="back"></div>
                        <div class="front"></div>
                    </div>
                </div>

                <div class="project ani1">
                    <div class="mask">
                        <div class="back"></div>
                        <div class="front"></div>
                    </div>
                </div>

                <div class="project ani2">
                    <div class="mask">
                        <div class="back"></div>
                        <div class="front"></div>
                    </div>
                </div>

                <div class="project ani3">
                    <div class="mask">
                        <div class="back"></div>
                        <div class="front"></div>
                    </div>
                </div>

                <div class="project ani4">
                    <div class="mask">
                        <div class="back"></div>
                        <div class="front"></div>
                    </div>
                </div>

                <div class="project ani5">
                    <div class="mask">
                        <div class="back"></div>
                        <div class="front"></div>
                    </div>
                </div>

                <div class="project ani6">
                    <div class="mask">
                        <div class="back"></div>
                        <div class="front"></div>
                    </div>
                </div>
            </div>

            <div class="btn show">点击抽奖</div>
        </div>
    </div>
</body>
<script type="text/javascript" src="jquery.js"></script>
<script>
    $(function () {
        $('.btn').click(function () {
            if ($(this).hasClass('show')) {
                $(this).removeClass('show');
                subMove();
            } else {
                $(this).addClass('show');
                addMove();
            }
        })
    })


    function addMove() {
        $('.project').each(function (index, item) {
            setTimeout(function () {
                $(item).addClass('ani' + index);
            }, index * 300);
        })
    }

    function subMove() {
        $('.project').each(function (index, item) {
            if (index < 5) {
                var timer1 = setTimeout(function () {
                    if (index !=4 ) {
                        $(item).addClass('showAwrad');
                    }
                    if (index > 0) {
                        var timer2 = setTimeout(function() {
                            window.clearTimeout(timer1);
                            $($('.project')[index-1]).removeClass('showAwrad');
                            if (index == 4) { 
                                setTimeout(function() {
                                    $('.project').each(function(index, item) {
                                        $(item).removeClass('ani' + index);
                                        if ($('.project').length-1 == index) {
                                            setTimeout(function() {
                                                addMove();
                                            }, 1000)
                                        }
                                    })
                                }, 1000)
                            }
                        }, 1000)
                    }
                }, index * 300);
            }
            // $(item).removeClass('ani' + index);
        })
        // $('.project').each(function (index, item) {
        //     $(item).removeClass('showAwrad');
        // })
    }
</script>

</html>